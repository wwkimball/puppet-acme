# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Classes**

_Public Classes_

* [`acme`](#acme): Install and configure acme.sh to manage SSL certificates

_Private Classes_

* `acme::request::handler`: Gather all data and use acme.sh to create accounts and sign certificates.
* `acme::setup::common`: Setup all necessary directories, users and groups.
* `acme::setup::puppetmaster`: Setup acme.sh and all necessary directories and packages.

**Defined types**

_Public Defined types_

* [`acme::certificate`](#acmecertificate): Request a certificate.

_Private Defined types_

* `acme::csr`: Create a Certificate Signing Request (CSR) and send it to PuppetDB
* `acme::deploy`: Collects signed certificates for this host from PuppetDB.
* `acme::deploy::crt`: Install a signed certificate on the target host.
* `acme::request`: A request to sign a CSR or renew a certificate.
* `acme::request::crt`: Fetch the certificate from facter and export it via PuppetDB.
* `acme::request::ocsp`: Retrieve ocsp stapling information

**Functions**

* [`file_or_empty_string`](#file_or_empty_string): Return the contents of a file.  Multiple files can be passed, and the first file that exists will be read in.

## Classes

### acme

Install and configure acme.sh to manage SSL certificates

#### Parameters

The following parameters are available in the `acme` class.

##### `certificates`

Data type: `Hash`

Array of full qualified domain names you want to request a certificate for.
For SAN certificates you need to pass space seperated strings,
for example ['foo.example.com fuzz.example.com', 'blub.example.com']

##### `profiles`

Data type: `Optional[Hash]`

A hash of profiles that contain information how acme.sh should sign
certificates. A profile defines not only the challenge type, but also all
required parameters and credentials used by acme.sh to sign the certificate.
Should only be defined on $acme_host.

Default value: `undef`

##### `accounts`

Data type: `Array`

An array of e-mail addresses that acme.sh may use during the Let's Encrypt
account registration. Should only be defined on $acme_host.

##### `acme_host`

Data type: `String`

The host you want to run acme.sh on.
For now it needs to be a puppetmaster, as it needs direct access
to the certificates using functions in Puppet.

##### `acme_git_url`

Data type: `String`

URL to the acme.sh GIT repository. Defaults to the official GitHub project.
Feel free to use a local mirror or fork.

##### `acme_git_force`

Data type: `Boolean`

Force repository creation, destroying any files on the path in the process.
Useful when the repo URL has changed.

##### `acme_revision`

Data type: `String`

The GIT revision of the acme.sh repository. Defaults to `master` which should
contain a stable version of acme.sh.

##### `letsencrypt_ca`

Data type: `Enum['production','staging']`

The Let's Encrypt CA you want to use. For testing and debugging you may want
to set it to `staging`, otherwise `production` is used and the usual
rate limits apply.

##### `renew_days`

Data type: `Integer`

Specifies the interval at which certs should be renewed automatically. Defaults to `60`.

##### `letsencrypt_proxy`

Data type: `Optional[String]`

Proxyserver to use to connect to the Let's Encrypt CA, for example `proxy.example.com:3128`

Default value: `undef`

##### `posthook_cmd`

Data type: `String`

Specified a optional command to run after a certificate has been changed.

##### `dh_param_size`

Data type: `Integer`

Specifies the DH parameter size, defaults to `2048`.

##### `ocsp_must_staple`

Data type: `Boolean`

Whether to request certificates with OCSP Must-Staple extension, defaults to `true`.

##### `manage_packages`

Data type: `Boolean`

Whether the module should install necessary packages, mainly git.
Set to `false` to disable package management.

##### `dnssleep`

Data type: `Integer`

The time in seconds acme.sh should wait for all DNS changes to take effect.
Settings this to `0` disables the sleep mechanism and lets acme.sh poll DNS
status automatically by using DNS over HTTPS.

##### `exec_timeout`

Data type: `Integer`

Specifies the time in seconds that any acme.sh operation can take before
it is aborted by Puppet. This should usually be set to a higher value
than `$dnssleep`.

##### `wildcard_marker`

Data type: `String`

A string that is used to replace `*` in wildcard certificates. This is required
because Puppet does not allow special chars in variable names.
DO NOT CHANGE THIS VALUE! It is hardcoded in all custom facts too.

##### `acme_install_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `acmecmd`

Data type: `String`



##### `acmelog`

Data type: `Stdlib::Compat::Absolute_path`



##### `base_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `acme_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `acct_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `cfg_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `key_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `crt_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `csr_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `results_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `log_dir`

Data type: `Stdlib::Compat::Absolute_path`



##### `ocsp_request`

Data type: `Stdlib::Compat::Absolute_path`



##### `date_expression`

Data type: `String`



##### `group`

Data type: `String`



##### `path`

Data type: `String`



##### `shell`

Data type: `String`



##### `stat_expression`

Data type: `String`



##### `user`

Data type: `String`



## Defined types

### acme::certificate

Request a certificate.

#### Parameters

The following parameters are available in the `acme::certificate` defined type.

##### `domain`

Data type: `String`

Full qualified domain names you want to request a certificate for.
For SAN certificates you need to pass space seperated strings,
for example 'foo.example.com fuzz.example.com'

Default value: $name

##### `use_account`

Data type: `String`

The Let's Encrypt account that should be used (or registered).
This account must exist in `$accounts` on your `$acme_host`.

##### `use_profile`

Data type: `String`

Specify the profile that should be used to sign the certificate.
This profile must exist in `$profiles` on your `$acme_host`.

##### `acme_host`

Data type: `String`

The host you want to run acme.sh on. Usually your Puppetserver.
Defaults to `$acme::acme_host`.

Default value: $acme::acme_host

##### `letsencrypt_ca`

Data type: `Optional[Enum['production','staging']]`

The Let's Encrypt CA you want to use. Used to overwrite the default Let's
Encrypt CA that is configured on `$acme_host`.

Default value: `undef`

##### `dh_param_size`

Data type: `Integer`

dh parameter size, defaults to $::acme::dh_param_size

Default value: $acme::dh_param_size

##### `ocsp_must_staple`

Data type: `Boolean`

request certificate with OCSP Must-Staple exctension, defaults to $::acme::ocsp_must_staple

Default value: $acme::ocsp_must_staple

##### `posthook_cmd`

Data type: `String`



Default value: $acme::posthook_cmd

##### `renew_days`

Data type: `Integer`



Default value: $acme::renew_days

## Functions

### file_or_empty_string

Type: Ruby 3.x API

Return the contents of a file.  Multiple files
can be passed, and the first file that exists will be read in.

#### `file_or_empty_string()`

Return the contents of a file.  Multiple files
can be passed, and the first file that exists will be read in.

Returns: `Any`

